version: '3.8'
services:
  wireguard:
    build: .
    environment:
      - SERVER_PORT=51820
      - CLIENT_PUBLIC_KEY=${CLIENT_PUBLIC_KEY}  # Define other variables as needed
    ports:
      - "${SERVER_PORT}:${SERVER_PORT}/udp"
    volumes:
      - ./config:/etc/wireguard
    secrets:
      - client_public_key
    restart: unless-stopped

secrets:
  client_public_key:
    file: ./client-public-key.txt

